# CAP 理论
传统的集中式系统， 所有业务模块都集中在单一系统中， 当单一系统性能不能支撑现有业务的时候，只能通过水平扩展，部署更多的服务， 在扩展过程中有些不必要的业务模块也随之扩展。  
为了减少不必要模块跟随集中式与系统水平扩展带来的浪费，更好的减少系统耦合冗余，以及更灵活的扩展和关闭相关系统。 当前在系统设计时会把集中式系统根据业务逻辑拆分成多个独立的服务， 各个服务之间通过RPC或者消息来交互。这就是现在流行的**微服务**  
  
* 微服务给现在的系统带来了各种好处：
  * 高可用性
  * 系统扩展更灵活
  * 不同服务可以根据自身需求以及团队技能选择不同的编程语言，数据库和技术栈
  * 降低各个系统之间的耦合度

* 缺点
  * 各个服务之间通过RPC 或者消息沟通增加了系统的复杂度（分布式锁， 分布式事务）
  * 服务之间网络的不确定性， 在服务间调用时要更多的考虑熔断降级
  * 数据的一致性
  
CAP理论具体含义
* Consistence(一致性)  
客户端对于数据的读取， 同一时间访问任意节点， 系统返回数据必须一致。 这就是所谓的强一致性。这就要系统某一结点收到数据更新操作时，必须同步数据到其他节点。在此数据同步过程中， 客户端对于某一节点该数据的访问返回error或者阻塞直到数据同步完成。

* Availablility(可用性)  
客户端对于任意节点的访问， 该节点必须在合理的时间内予以相应。但是不保证数据是否是最新的

* Network Partition(分区容错性)  
因为分布式系统的高可用性，系统和数据被部署在不同节点中， 会出现网络故障或者延迟，出现网络分区现象
  
CAP 在任意系统中CAP三个要素只能同时满足两个，所以系统设计时必须根据业务需求做取舍 AP CP AC  
在分布式系统中P为必要元素， 因为网络故障和网络延迟时不可避免的， 一个AC系统就回归到了原始集中式系统。 所以一般要在AP 和CP中取舍。

**P分区容错**并不是时刻存在的， 当网络正常时CA时可以同时满足

## AP系统
更好的性能，但是访问不同节点数据时可能会返回不同结果。 当对于数据一致性要求不高时选用， Eureka, Cassandra 和 DynamoDB
## CP系统
保证数据一致性， 访问不同节点获取数据是相同的。 性能相对低。 ZooKeeper，Etcd 和 HBase
## CA系统
传统单机MYSQL


